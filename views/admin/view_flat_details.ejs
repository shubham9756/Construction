<%-include('navbar')%>
    <br>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        body {
            background-color: #f8f9fa;
            /* Light gray background */
        }

        .header-blue {
            background-color: #2c3e50;
            /* Darker blue for the main header */
            color: white;
            /* Added shadow for better separation */
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }

        .card-header-blue {
            background-color: #3498db;
            /* Blue for card headers */
            color: white;
            padding: 0.75rem 1.25rem;
            margin-bottom: 0;
            border-bottom: none;
            /* Removed default border, blue header is enough */
            font-weight: 500;
        }

        .flat-detail-row {
            /* Using Bootstrap's py-2 for vertical padding */
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
        }

        .flat-detail-label {
            font-weight: bold;
            color: #6c757d;
            /* Muted color for labels */
        }

        .btn-purple {
            background-color: #9b59b6;
            /* Purple color for the Add button */
            color: white;
        }

        .btn-purple:hover {
            background-color: #8e44ad;
            color: white;
        }

        /* Style for the card body to match the image spacing */
        .card-body-details {
            padding-left: 1.25rem;
            padding-right: 1.25rem;
        }
    </style>

    <div class="container-fluid p-0">

        <header class="header-blue py-2 px-3 d-flex justify-content-between align-items-center sticky-top">
            <h5 class="mb-0 text-uppercase">
                <i class="bi bi-house-fill me-2"></i>
                FLAT DETAILS: <%-flats[0].site_name%> &gt; <%-flats[0].flat_name%>
            </h5>
            <a href="/edit_flat/<%-flats[0].flat_id%>">
            <button class="btn btn-light btn-sm">
                <i class="bi bi-pencil-square me-1"></i>
                EDIT DETAILS
            </button>
            </a>
        </header>

        <div class="container-fluid py-3">
            <div class="row g-3">

                <div class="col-lg-6">
                    <div class="card shadow-sm h-100">
                        <div class="card-header-blue card-header bg-primary">
                            <i class="bi bi-info-circle-fill me-1"></i>
                            BASIC INFORMATION
                        </div>
                        <div class="card-body card-body-details">
                            <div class="row flat-detail-row border-bottom">
                                <div class="col-4 flat-detail-label text-uppercase">SITE NAME</div>
                                <div class="col-8"><%-flats[0].site_name%></div>
                            </div>
                            <div class="row flat-detail-row border-bottom">
                                <div class="col-4 flat-detail-label text-uppercase">FLAT NUMBER</div>
                                <div class="col-8"><%-flats[0].flat_name%></div>
                            </div>
                            <div class="row flat-detail-row border-bottom">
                                <div class="col-4 flat-detail-label text-uppercase">FLAT DETAILS</div>
                                <div class="col-8"><%-flats[0].description%></div>
                            </div>
                            <div class="row flat-detail-row border-bottom">
                                <div class="col-4 flat-detail-label text-uppercase">SITE LOCATION</div>
                                <div class="col-8 text-wrap"><%-flats[0].site_location%></div>
                            </div>
                            <div class="row flat-detail-row border-bottom">
                                <div class="col-4 flat-detail-label text-uppercase">ADDED ON</div>
                                <div class="col-8"><%-flats[0].site_start_date.toLocaleDateString('en-IN')%></div>
                            </div>
                            <div class="row flat-detail-row">
                                <div class="col-4 flat-detail-label text-uppercase">TYPE</div>
                                <div class="col-8"><%-flats[0].type%></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="card shadow-sm h-100">
                        <!-- Card Header -->
                        <div class="card-header bg-primary text-white fw-bold d-flex align-items-center">
                            <i class="bi bi-gear-fill me-2"></i> FLAT SPECIFICATIONS
                        </div>

                        <!-- Card Body -->
                        <div class="card-body">
                            <!-- Table -->
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover table-sm align-middle">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Specification Name</th>
                                            <th>Specification Details</th>
                                            <th class="text-center">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% if(result.length> 0){ %>
                                            <% for(var i=0;i<result.length;i++){ %>
                                                <tr>
                                                    <td><%- result[i].spec_name %></td>
                                                    <td><%- result[i].spec_details %></td>
                                                    <td class="text-center">
                                                        <a href="/delete_spec/<%- result[i].spec_id %>/<%- flats[0].flat_id %>"
                                                            class="btn btn-outline-danger btn-sm">
                                                            <i class="bi bi-trash"></i>
                                                        </a>
                                                    </td>
                                                </tr>
                                                <% } %>
                                                    <% } else { %>
                                                        <tr>
                                                            <td colspan="3" class="text-center text-muted">No
                                                                specifications added yet.</td>
                                                        </tr>
                                                        <% } %>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Divider -->
                            <hr>

                            <!-- Form -->
                            <form class="row  align-items-center"
                                action="/save_specification/<%-flats[0].flat_id %>" method="post">
                                <div class="col-md-4">
                                    <input type="text" class="form-control" placeholder="Specification Name"
                                        name="spc_name" required style="border: 2px solid black;">
                                </div>
                                <div class="col-md-5">
                                    <input type="text" class="form-control" placeholder="Specification Details"
                                        name="spc_details" required style="border: 2px solid black;">
                                </div>
                                <div class="col-md-3">
                                    <button type="submit" class="btn btn-success w-100">
                                         Add
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

            </div>

            <div class="row mt-3">
                <div class="col-12 ">
                    <div class="card shadow-sm ">
                        <div class="card-header-blue card-header bg-primary">
                            <i class="bi bi-image-fill me-1"></i>
                            FLAT IMAGES
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-lg-4 col-md-6">
                                    <a href="flat-image-1.jpg" target="_blank" class="d-block">
                                        <img src="/image/flat/<%-flats[0].flat_image%>" class="img-fluid rounded shadow"
                                            alt="Flat Image 1">
                                    </a>
                                </div>
                                <div class="col-lg-4 col-md-6">
                                    <a href="flat-image-2.jpg" target="_blank" class="d-block">
                                        <img src="/image/site_image/<%-flats[0].site_structure_image%>"
                                            class="img-fluid rounded shadow" alt="Flat Image 2">
                                    </a>
                                </div>
                                <div class="col-lg-4 col-md-6">
                                    <a href="flat-image-3.jpg" target="_blank" class="d-block">
                                        <img src="/image/site_image/<%-flats[0].site_3d_image%>"
                                            class="img-fluid rounded shadow" alt="Flat Image 3">
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <%-include('footer')%>