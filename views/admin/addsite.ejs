<%- include('navbar.ejs') %>

<style>
	.form-control {
		border: 1px solid black !important;
		border-radius: 0 !important;
	}
	textarea {
		border: 1px solid black !important;
		border-radius: 0 !important;
	}
	#editor {
		border: 1px solid black !important;
		border-radius: 0 !important;
	}
	label {
		text-transform: uppercase;
		color: #000;
		font-weight: 600;
	}
	.card-header {
		border-left: 7px solid orange;
		background: linear-gradient(to right, #290566, #4b3f92, rgb(183, 121, 219));
	}
	.btn-lg{
		background-color: #6a1b9a;
		color: white;
		font-weight: 600;
		border: none;
	}
</style>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container mt-4">
	<div class="card shadow">
		<div class="card-header text-white p-4 fw-bold">
			<h4 class="mb-0">Add New Site</h4>
		</div>
		<div class="card-body">
			<form action="/save_site" method="POST" enctype="multipart/form-data">
				<div class="row g-3">

					<div class="col-md-3">
						<label for="site_name" class="form-label">SITE NAME</label>
						<input type="text" class="form-control" id="site_name" name="site_name" maxlength="100"
							required placeholder="Enter Site Name">
					</div>

					<div class="col-md-3">
						<label for="site_location" class="form-label">SITE ADDRESS</label>
						<input type="text" class="form-control" id="site_location" name="site_location"
							maxlength="255" placeholder="Enter Site Address">
					</div>

					<div class="col-md-3">
						<label for="site_manager_name" class="form-label">MANAGER NAME</label>
						<input type="text" class="form-control" id="site_manager_name" name="site_manager_name"
							maxlength="100" placeholder="Enter Manager Name">
					</div>

					<div class="col-md-3">
						<label for="site_structure_image" class="form-label">STRUCTURE IMAGE</label>
						<input type="file" class="form-control" id="site_structure_image"
							name="site_structure_image" accept="image/*">
					</div>

					<div class="col-md-3">
						<label for="site_3d_image" class="form-label">3D IMAGE</label>
						<input type="file" class="form-control" id="site_3d_image" name="site_3d_image"
							accept="image/*">
					</div>

					<div class="col-md-3">
						<label for="site_start_date" class="form-label">START DATE</label>
						<input type="date" class="form-control" id="site_start_date" name="site_start_date">
					</div>

					<div class="col-md-5">
						<label for="site_map_link" class="form-label">SITE MAP LINK</label>
						<textarea class="form-control" id="site_map_link" name="site_map_link"
							placeholder="Enter Your Map Link"></textarea>
					</div>

					<div class="col-md-12">
						<label for="site_description" class="form-label">SITE DETAILS</label>
						<textarea class="form-control" id="ckeditor" name="site_description"></textarea>
					</div>

				</div>

				<div class="row mt-3">
					<div class="col-md-12 text-end">
						<button type="submit" class=" btn-lg">Add Site</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>

<script>
	CKEDITOR.replace('site_description');
</script>

<script>
	function calculateDetails() {
		let totalArea = parseFloat(document.getElementById("total_area_sqft").value) || 0;
		let flatsPerFloor = parseInt(document.getElementById("flats_per_floor").value) || 0;
		let totalFloors = parseInt(document.getElementById("total_floors").value) || 0;

		let totalFlats = flatsPerFloor * totalFloors;
		document.getElementById("total_flats").value = totalFlats;

		if (totalArea > 0 && totalFlats > 0) {
			document.getElementById("flat_area_sqft").value = (totalArea / totalFlats).toFixed(2);
		}
	}

	document.getElementById("total_area_sqft").addEventListener("input", calculateDetails);
	document.getElementById("flats_per_floor").addEventListener("input", calculateDetails);
	document.getElementById("total_floors").addEventListener("input", calculateDetails);
</script>

<%- include('footer.ejs') %>
