<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invoice</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body{
    background:#fff;
    font-family: Arial, sans-serif;
    margin:0;
    padding:0;
}
.header-btns{
    text-align:center;     /* Center buttons */
    margin-top:15px;
    margin-bottom:10px;
}
.header-btns .btn-group{
    display:inline-flex;
}
.invoice-container{
    width:95%;
    margin:0 auto;
    padding:10px 0;
    position:relative;
}
.invoice-top{
    display:flex;
    align-items:center;
    justify-content:space-between;
}
.invoice-top-left{
    display:flex;
    align-items:center;
    gap:20px;
}
.invoice-top-left img{ height:100px; }
.company-details h5{ font-weight:bold; margin-bottom:2px; color:#c48b00; }
.company-details p{ margin:0; font-size:14px; }
.vertical-title{
    writing-mode:vertical-rl;
    text-orientation: mixed;
    background:#caa200;
    color:white;
    font-weight:bold;
    letter-spacing:1px;
    padding:15px 8px;
    font-size:16px;
}
.divider{ border-top:3px solid #caa200; margin:10px 0; }
.table th,.table td{ text-align:center; vertical-align:middle; padding:5px; font-size:14px; }
.summary-table td{ text-align:right; padding:3px 8px; font-size:14px; }
.signatures{ display:flex; justify-content:space-between; margin-top:40px; }
.signatures div{ text-align:center; width:30%; font-size:14px; }
.note-box{ margin-top:20px; font-size:14px; }
</style>
</head>
<body>

<!-- Centered Buttons -->
<div class="header-btns">
  <div class="btn-group">
    <button class="btn btn-outline-secondary btn-sm" onclick="window.print()">Print</button>
    <button class="btn btn-outline-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
      SHARE BILL
    </button>
    <ul class="dropdown-menu">
      <li>
        <!-- WhatsApp share -->
        <a class="dropdown-item"
           href="https://api.whatsapp.com/send?text=Hello,%20please%20check%20this%20invoice."
           target="_blank">
          Share via WhatsApp
        </a>
      </li>
      <li>
        <!-- Email share -->
        <a class="dropdown-item"
           href="mailto:?subject=Invoice%20Details&body=Please%20check%20this%20invoice."
           target="_blank">
          Share via Email
        </a>
      </li>
    </ul>
  </div>
</div>

<div class="invoice-container">

  <!-- Top Section -->
  <div class="invoice-top">
    <div class="invoice-top-left">
      <img src="/image/construction.png" alt="Logo">
      <div class="company-details">
        <h5>ROYAL CONSTRUCTION</h5>
        <p>Mo. 1234567890 / 90123456789</p>
        <p>A.NAGAR</p>
      </div>
    </div>
    <div class="vertical-title">INVOICE</div>
  </div>

  <div class="divider"></div>

  <!-- Received & Purchase Details -->
  <div class="d-flex justify-content-between mb-3">
    <div>
      <strong>Received From</strong><br>
      <%-vendor[0].vendor_name%>,<br><br>
      <b>Mob:</b> 9638527410<br>
      <b>GST No:</b> MKXJH12355L
    </div>
    <div class="text-end">
      <b>CIN No:</b> U886HFJKS8678BBSV<br>
      <b>GSTIN:</b> ABCS1234NYZS<br><br>
      <b>Purchase No:</b> <%-vendor[0].eway_bill%><br>
      <%-vendor[0].purchase_date%><br>
      <%-vendor[0].purchase_type%>
    </div>
  </div>

  <!-- Table -->
  <table class="table table-bordered">
    <thead class="table-light">
      <tr>
        <th>SN</th>
        <th>Material</th>
        <th>Qty</th>
        <th>UDM</th>
        <th>Rate</th>
        <th>Discont</th>
        <th>Taxable Value</th>
        <th>GST</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      <% for (i=0;i<vendor.length;i++) { %>
      <tr>
        <td><%-i+1%></td>
        <td><%-vendor[i].raw_material%></td>
        <td><%-vendor[i].qty%></td>
        <td><%-vendor[i].udm%></td>
        <td><%-vendor[i].rate%></td>
        <td><%-vendor[i].discount%></td>
        <td><%-vendor[i].taxable%></td>
        <td><%-vendor[i].gst%>%</td>
        <td><%-vendor[i].total%></td>
      </tr>
      <% } %>
    </tbody>
  </table>

  <!-- Totals -->
  <div class="row mt-2">
    <div class="col-md-8"></div>
    <div class="col-md-4">
      <table class="table table-bordered summary-table">
        <tr>
          <td><%-vendor[0].taxable%> /-</td>
          <td><%-vendor[0].gst%>%</td>
          <td>₹<%-vendor[0].total%> /-</td>
        </tr>
        <tr>
          <td colspan="3">Extra Charges : ₹<%-vendor[0].extra_charges%> /-</td>
        </tr>
        <tr>
          <td colspan="3"><strong>Grand Total : ₹<%-vendor[0].grand_total%> /-</strong></td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Note -->
  <div class="note-box">
    <b>Note:<%-vendor[0].note%></b>
  </div>

  <!-- Signatures -->
  <div class="signatures">
    <div>
      <br>
      <img src="/image/<%-vendor[0].employee_sign%>" alt="" width="100px"><br>
      <span style="font-family:cursive;">(Signature)</span><br>
      Employee Signature<br>
      avinash
    </div>
    <div></div>
    <div>
      <br>
      <img src="/image/<%-vendor[0].vendor_sign%>" alt="" width="100px"><br>
      Dealer Signature
    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  document.querySelector(".invoice-container").addEventListener("dblclick", function () {
    // purchase_id ko URL me bheje
    window.location.href = "/view_purchase_details/<%- vendor[0].purchase_id %>";
  });
});
</script>

</body>
</html>
