<%-include('navbar')%>
<style>
    body {
        background: #f5f6fa;
        font-family: Arial, sans-serif;
    }
    .form-container {
        background: #fff;
        border-radius: 6px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        padding: 0;
    }
    .section-header {
        background: linear-gradient(to right, #290566, #4b3f92, rgb(183, 121, 219));
        color: #fff;
        font-weight: bold;
        padding: 10px 15px;
        border-left: 6px solid gold;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .form-label { font-weight: 600; font-size: 14px; text-transform: uppercase; }
    .form-control, .form-select { border: 1px solid black !important; border-radius: 0 !important; }
    .btn-save { background: #6a1b9a; color: #fff; padding: 8px 20px; border: none; font-weight: 500; }
    .btn-save:hover { background: #333; }
    .btn-reset { background: #dc3545; color: #fff; padding: 8px 20px; border: none; margin-left: 10px; font-weight: 500; }
    .btn-reset:hover { background: #a71d2a; }
</style>

<div class="container my-5">
    <div class="form-container">
        <!-- Header -->
        <div class="section-header">
            <span>Update Employee</span>
        </div>

        <!-- Update Form -->
        <form class="p-4" action="/update_employee/<%= employee.employee_id %>" method="POST" enctype="multipart/form-data">
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Employee Name *</label>
                    <input type="text" class="form-control" name="employee_name"
                        value="<%= employee.employee_name %>" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Employee Email *</label>
                    <input type="email" class="form-control" name="employee_email"
                        value="<%= employee.employee_email %>" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Employee Mobile *</label>
                    <input type="text" class="form-control" name="employee_mobile"
                        value="<%= employee.employee_mobile %>" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Joining Date *</label>
                    <input type="date" class="form-control" name="employee_joining_date"
                        value="<%= employee.employee_joining_date.toISOString().split('T')[0] %>" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Employee Photo</label>
                    <input type="file" class="form-control" name="employee_photo">
                    <small class="text-muted">Current: <%= employee.employee_photo %></small>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Employee Address</label>
                    <input type="text" class="form-control" name="employee_address"
                        value="<%= employee.employee_address %>">
                </div>

                <div class="col-md-6">
                    <label class="form-label">PAN Number</label>
                    <input type="text" class="form-control" name="pan_number"
                        value="<%= employee.pan_number %>">
                </div>

                <div class="col-md-6">
                    <label class="form-label">Aadhar Number</label>
                    <input type="text" class="form-control" name="aadhar_number"
                        value="<%= employee.aadhar_number %>">
                </div>

                <div class="col-md-4">
                    <label class="form-label">Password *</label>
                    <input type="text" class="form-control" name="employee_password"
                        value="<%= employee.employee_password %>" required>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Date of Birth</label>
                    <input type="date" class="form-control" name="employee_dob"
                        value="<%= employee.employee_dob ? employee.employee_dob.toISOString().split('T')[0] : '' %>">
                </div>

                <div class="col-md-4">
                    <label class="form-label">Position *</label>
                    <input type="text" class="form-control" name="employee_position"
                        value="<%= employee.employee_position %>" required>
                </div>

                <div class="col-md-4">
                    <label class="form-label">In Time *</label>
                    <input type="time" class="form-control" name="employee_in_time"
                        value="<%= employee.employee_in_time %>" required>
                </div>

                <div class="col-md-4">
                    <label class="form-label">Monthly Payment *</label>
                    <input type="number" class="form-control" name="employee_monthly_payment"
                        value="<%= employee.employee_monthly_payment %>" required>
                </div>

                <!-- âœ… New Pending Amount Field -->
                <div class="col-md-4">
                    <label class="form-label">Pending Amount</label>
                    <input type="number" class="form-control" name="pending_amount"
                        value="<%= employee.pending_amount || 0 %>" min="0" step="0.01">
                </div>

                <div class="col-md-4">
                    <label class="form-label">Employee Type *</label>
                    <select class="form-select" name="employee_type" required>
                                <option value="">-- Select Type --</option>
                                <% result.forEach(function(type) { %>
                                    <option value="<%= type.id %>">
                                        <%= type.type_name %> - <%= type.type_description %>
                                    </option>
                                    <% }); %>
                            </select>
                </div>
            </div>

            <!-- Buttons -->
            <div class="text-end mt-5">
                <button type="submit" class="btn-save">UPDATE</button>
                <button type="reset" class="btn-reset">RESET</button>
            </div>
        </form>
    </div>
</div>

<%-include('footer')%>
