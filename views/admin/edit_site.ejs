<%- include('navbar.ejs') %>

<style>
  .form-control {
    border: 2px solid black;
    border-radius: 0%;
  }

  .back {
    background: linear-gradient(to right, #290566, #4b3f92, rgb(183, 121, 219));
    border-left: 7px solid orange;
  }

  .btn {
    background-color: #6a1b9a;
    color: white;
  }
</style>

<div class="container mt-5">
  <div class="card shadow-lg">
    <div class="card-header text-white fw-bold back">
      EDIT SITE "<%= site.site_name %>"
    </div>
    <div class="card-body">
      <form action="/update_site/<%= site.site_id %>" method="POST" enctype="multipart/form-data">
        <div class="row">
          <!-- Site Name -->
          <div class="mb-3 col-md-6">
            <label for="siteName" class="form-label fw-bold text-dark">Site Name <span class="text-danger">*</span></label>
            <input type="text" class="form-control" id="siteName" name="site_name" value="<%= site.site_name %>" required>
          </div>

          <!-- Site Address -->
          <div class="mb-3 col-md-6">
            <label for="siteAddress" class="form-label fw-bold text-dark">Site Address</label>
            <input type="text" class="form-control" id="siteAddress" name="site_location" value="<%= site.site_location %>">
          </div>

          <!-- Site Manager -->
          <div class="mb-3 col-md-6">
            <label for="siteManager" class="form-label fw-bold text-dark">Site Manager Name</label>
            <input type="text" class="form-control" id="siteManager" name="site_manager_name" value="<%= site.site_manager_name %>">
          </div>

          <!-- Site Start Date -->
          <div class="mb-3 col-md-6">
            <label for="siteStartDate" class="form-label fw-bold text-dark">Site Start Date</label>
            <input type="date" class="form-control" id="siteStartDate" name="site_start_date"
              value="<%= site.site_start_date ? new Date(site.site_start_date).toISOString().split('T')[0] : '' %>">
          </div>

          <!-- Site Map -->
          <div class="mb-3 col-md-6">
            <label for="siteMap" class="form-label fw-bold text-dark">Site Map Link</label>
            <input type="text" class="form-control" id="siteMap" name="site_map_link" value="<%= site.site_map_link %>" required>
            <small class="text-muted">
              <a href="<%= site.site_map_link %>" target="_blank">View Current Map</a>
            </small>
          </div>

          <!-- Site Structure Image -->
          <div class="mb-3 col-md-6">
            <label for="siteStructureImage" class="form-label fw-bold text-dark">Site Structure Image</label>
            <input class="form-control" type="file" id="siteStructureImage" name="site_structure_image">
            <% if(site.site_structure_image){ %>
              <img src="/image/site_image/<%= site.site_structure_image %>" alt="Structure" class="img-thumbnail mt-2" width="150">
            <% } %>
          </div>

          <!-- Site 3D Image -->
          <div class="mb-3 col-md-6">
            <label for="site3DImage" class="form-label fw-bold text-dark">Site 3D Image</label>
            <input class="form-control" type="file" id="site3DImage" name="site_3d_image">
            <% if(site.site_3d_image){ %>
              <img src="/image/site_image/<%= site.site_3d_image %>" alt="3D" class="img-thumbnail mt-2" width="150">
            <% } %>
          </div>

          <!-- Site Details -->
          <div class="mb-3 col-12">
            <label for="siteDetails" class="form-label fw-bold text-dark">Site Details</label>
            <textarea class="form-control" id="siteDetails" name="site_description" rows="3"><%- site.site_description %></textarea>
          </div>
        </div>

        <!-- Buttons -->
        <div class="d-flex justify-content-end">
          <button type="submit" class="btn">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>

<%- include('footer.ejs') %>
