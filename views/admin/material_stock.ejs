<%- include('navbar.ejs') %>
<style>
  button {
    margin: 5px;
  }

  .card-header {
    background: linear-gradient(to right, #290566, #4b3f92, rgb(183, 121, 219));
    border-left: 7px solid orange;
    color: #fff;
    font-weight: bold;
    margin-bottom: 10px;
  }
</style>
<!-- Bootstrap Icons CDN -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
/>

<div class="container mt-5">
  <div class="card shadow">
    <div class="card-header text-white">
      <h4 class="mb-0">RAW MATERIAL / PRODUCT LIST</h4>
    </div>
    <div class="card-body">
      <table
        id="materialTable"
        class="table table-bordered table-striped table-hover"
      >
        <thead>
          <tr>
            <th>Actions</th>
            <th>Company Name</th>
            <th>Material Name</th>
            <th>Unit / Weight</th>
            <th>UDM</th>
            <th>Purchase Amount</th>
            <th>Address</th>
            <th>GST %</th>
            <th>Status</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <% if (material && material.length > 0) { %> <%
          material.forEach(function(item, index) { %>
          <tr>
            <td>
              <a
                href="/admin/view_raw_material/<%= item.id %>"
                class="btn btn-sm btn-primary"
              >
                <i class="bi bi-eye"></i>
              </a>
              <a
                href="/admin/edit_raw_material/<%= item.id %>"
                class="btn btn-sm btn-warning"
              >
                <i class="bi bi-pencil"></i>
              </a>
              <a
                href="/admin/delete_raw_material/<%= item.id %>"
                class="btn btn-sm btn-danger"
                onclick="return confirm('Are you sure?')"
              >
                <i class="bi bi-trash"></i>
              </a>
            </td>
            <td><%= item.company_name %></td>
            <td><%= item.raw_material_name %></td>
            <td><%= item.unit_weight %></td>
            <td><%= item.udm_name %></td>
            <td>â‚¹ <%= item.purchase_amount %></td>
            <td><%= item.sale_address %></td>
            <td><%= item.gst_percentage %>%</td>
            <td>
              <% if (item.status === 'Active') { %>
              <span class="badge bg-success">Active</span>
              <% } else { %>
              <span class="badge bg-danger">Inactive</span>
              <% } %>
            </td>
            <td><%= item.created_at.toLocaleDateString() %></td>
          </tr>
          <% }) %> <% } else { %>
          <tr>
            <td colspan="11" class="text-center text-danger">
              No Raw Materials Found
            </td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>
<%- include('footer.ejs') %>
<script>
  $(document).ready(function () {
    $("#materialTable").DataTable({
      responsive: true,
      dom: "Bfrtip",
      buttons: ["copy", "csv", "excel", "pdf", "print", "colvis"],
    });
  });
</script>
