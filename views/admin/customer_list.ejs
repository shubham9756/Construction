<%-include('navbar.ejs')%>
<div class="container mt-4">
  <div class="card shadow">
    <div class="card-header bg-primary text-white fw-bold">
      Customer List
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-bordered table-striped align-middle text-center">
          <thead class="table-dark">
            <tr>
              <th>Action</th>
              <th>ID</th>
              <th>Full Name</th>
              <th>Mobile</th>
              <th>Email</th>
              <th>Status</th>
              <th>Created At</th>
            </tr>
          </thead>
          <tbody>
            <% customer.forEach(function(cust){ %>
              <tr>
                <td>
                  <!-- View -->
                  <a href="/customer/<%= cust.id %>" class="btn btn-sm btn-info text-white" title="View">
                    <i class="fas fa-eye"></i>
                  </a>
                  <!-- Edit -->
                  <a href="/customer/edit/<%= cust.id %>" class="btn btn-sm btn-warning text-white" title="Edit">
                    <i class="fas fa-edit"></i>
                  </a>
                  <!-- Delete -->
                  <a href="/customer/delete/<%= cust.id %>" class="btn btn-sm btn-danger" title="Delete" onclick="return confirm('Are you sure you want to delete this customer?');">
                    <i class="fas fa-trash"></i>
                  </a>
                </td>
                <td><%= cust.id %></td>
                <td><%= cust.full_name %></td>
                <td><%= cust.mobile %></td>
                <td><%= cust.email %></td>
                <td>
                  <% if(cust.status === 'Active'){ %>
                    <span class="badge bg-success"><%= cust.status %></span>
                  <% } else { %>
                    <span class="badge bg-danger"><%= cust.status %></span>
                  <% } %>
                </td>
                <td><%= cust.created_at.toLocaleString() %></td>
                
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    $('#customerTable').DataTable({
      dom: 'Bfrtip',
      buttons: [
        {
          extend: 'csvHtml5',
          text: '<i class="fas fa-file-csv"></i> Export CSV',
          className: 'btn btn-success btn-sm'
        },
        {
          extend: 'print',
          text: '<i class="fas fa-print"></i> Print',
          className: 'btn btn-dark btn-sm'
        },
        {
          extend: 'colvis',
          text: '<i class="fas fa-columns"></i> Column Visibility',
          className: 'btn btn-secondary btn-sm'
        }
      ]
    });
  });
</script>

<%-include('footer.ejs')%>