<%- include('navbar.ejs') %>

<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<div class="container mt-5">
  <h2 class="text-center mb-4">Pending Sites</h2>
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-hover align-middle text-center mb-0">
      <thead class="table-dark">
        <tr>
          <th scope="col">Action</th>
          <th scope="col">Site Name</th>
          <th scope="col">Location</th>
          <th scope="col">Manager</th>
          <th scope="col">Start Date</th>
          <th scope="col">Total Area</th>
          <th scope="col">Flats/Floor</th>
          <th scope="col"> Floors</th>
          <th scope="col"> Flats</th>
          <th scope="col">Flat Area </th>
          <th scope="col">Status</th>
        </tr>
      </thead>
      <tbody class="table-light">
        <% data.forEach(function(site) { 
            if(site.status === 'Pending') { %>
          <tr>
            <td class="d-flex justify-content-center gap-2">
              <a href="/admin/editsite/<%= site.id %>" class="btn btn-outline-primary btn-sm" title="Edit">
                <i class="bi bi-pencil-fill"></i>
              </a>
              <a href="/admin/deletesite/<%= site.id %>" class="btn btn-outline-danger btn-sm" title="Delete" onclick="return confirm('Are you sure you want to delete this site?')">
                <i class="bi bi-trash-fill"></i>
              </a>
            </td>
            <td><%= site.site_name %></td>
            <td><%= site.site_location %></td>
            <td><%= site.site_manager_name %></td>
            <td><%= site.site_start_date.toISOString().split('T')[0] %></td>
            <td><%= site.total_area_sqft %> </td>
            <td><%= site.flats_per_floor %></td>
            <td><%= site.total_floors %></td>
            <td><%= site.total_flats %></td>
            <td><%= site.flat_area_sqft %></td>
            <td>
              <span class="badge bg-warning text-dark"><%= site.status %></span>
            </td>
          </tr>
        <% } }); %>
      </tbody>
    </table>
  </div>
</div>

<%- include('footer.ejs') %>
