<%-include('navbar.ejs')%>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <style>
    
      .card {
        border: 1px solid #ddd;
        background: #fff;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }
      .card-header {
        background: #1a2c80;
        color: #fff;
        font-weight: bold;
        padding: 8px 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .invoice-box {
        background: #1a2c80;
        color: #fff;
        padding: 6px 12px;
        font-size: 13px;
        border-radius: 4px;
        text-align: right;
      }
      .card-body {
        padding: 15px;
      }
      .row {
        margin-bottom: 15px;
      }
      .info-block {
        border: 1px solid #ddd;
        padding: 10px;
        margin-bottom: 15px;
        font-size: 14px;
      }
      .info-block p {
        margin: 0 0 5px 0;
        line-height: 1.4;
      }
      .info-block span {
        font-weight: bold;
        color: #444;
      }
      .signature-block {
        display: flex;
        gap: 15px;
        margin-top: 15px;
      }
      .signature-box {
        flex: 1;
        border: 1px dashed #888;
        text-align: center;
        padding: 15px;
        font-size: 13px;
      }
      .signature-box img {
        max-width: 150px;
        margin-top: 10px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 0;
        font-size: 14px;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 8px 10px;
      }
      th {
        background: #1a2c80;
        color: #fff;
        text-align: left;
      }
      .highlight {
        background: #ede7f6;
        font-weight: bold;
      }
      .payment-history p {
        font-weight: bold;
        margin: 10px 0 5px 0;
        font-size: 14px;
      }
      /* Footer Buttons - Initial State */
      .btn-footer {
        margin-top: 20px;
        display: flex;
        gap: 12px;
        justify-content: center;
        flex-wrap: wrap;
      }
      .btn-footer a,
      .btn-footer button {
        border: none;
        padding: 0;
        font-size: 14px;
        font-weight: bold;
        border-radius: 4px;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        width: 160px;
        height: 45px;
        transition: transform 0.2s, box-shadow 0.2s;
        text-align: center;
        text-decoration: none;
      }
      .btn-footer a:hover,
      .btn-footer button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      .btn-new {
        background: #28a745;
      }
      .btn-close {
        background: #dc3545;
      }
      .btn-print {
        background: #007bff;
      }
      .btn-return {
        background: #6c757d;
      }
      /* Footer Buttons - "Bill Closed" State */
      .bill-closed-footer {
        display: none;
        background-color: #f0f0f0;
        padding: 15px;
        margin-top: 20px;
        border: 1px solid #ccc;
        border-radius: 8px;
        text-align: center;
      }
      .bill-closed-footer .label {
        font-weight: bold;
        margin-bottom: 10px;
      }
      .bill-closed-footer .buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
      }
      .bill-closed-footer a {
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        font-weight: bold;
        color: #fff;
        transition: transform 0.2s, box-shadow 0.2s;
        text-decoration: none;
      }
      .bill-closed-footer a:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      .btn-reopen {
        background: #17a2b8;
      }
      .btn-print-closed {
        background: #007bff;
      }
      .btn-print-all {
        background: #673ab7; /* Dark color */
        color: #fff;
        border: none;
        padding: 10px 18px;
        font-weight: bold;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        margin-top: 15px;
        float: right;
        height: 45px;
        transition: transform 0.2s, box-shadow 0.2s;
        text-decoration: none;
      }
      .btn-print-all:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      /* Custom Modal Styles */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1050;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }
      .modal-overlay.show {
        opacity: 1;
        visibility: visible;
      }
      .modal-content {
        background: #fff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        max-width: 400px;
        width: 90%;
        text-align: center;
      }
      .modal-header {
        border-bottom: 1px solid #eee;
        padding-bottom: 15px;
        margin-bottom: 15px;
      }
      .modal-header h5 {
        margin: 0;
        font-weight: bold;
      }
      .modal-body p {
        margin-bottom: 0;
      }
      .modal-footer {
        margin-top: 20px;
      }
      .modal-close-btn {
        background: #1a2c80;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
      }
      /* Media query to hide buttons and edit icons on print */
      @media print {
        .btn-footer,
        .bill-closed-footer,
        .btn-print-all, /* Added this line to hide the new button */
        .fas.fa-edit {
          display: none !important;
        }
      }
    </style>
    <br>
    <br>
    <div class="card">
      <div class="card-header text-dark">
        SALE FLAT/STORE/HOUSE BILL DETAILS
        <div class="invoice-box">INVOICE: 2 | 12 AUG 2025</div>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <div class="info-block">
              <p><span>SITE:</span> PRATHMESH ELITE</p>
              <p>
                <span>FLAT / HOUSE / STORE NO.:</span> FLAT : P145 (1200/1000
                SQFT)
              </p>
              <p><span>CUSTOMER NAME:</span> BHAVESH GAWALI</p>
              <p><span>DEADLINE DATE:</span> 31 AUG 2025</p>
              <p><span>SALE DESCRIPTION:</span> TESTR</p>
              <p><span>SQUARE FEET:</span> -</p>
              <p><span>RATE:</span> ₹ 0</p>
              <p><span>PAYMENT RECEIVED:</span> ₹ 0</p>
            </div>
            <div class="signature-block">
              <div class="signature-box">
                <p>EMPLOYEE SIGNATURE</p>

                <img
                  src="https://via.placeholder.com/150x50.png?text=Signature"
                  alt="Employee Signature"
                />
              </div>
              <div class="signature-box">
                <p>CUSTOMER SIGNATURE</p>
                <img
                  src="https://via.placeholder.com/150x50.png?text=Signature"
                  alt="Customer Signature"
                />
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <table>
              <thead>
                <tr>
                  <th>DESCRIPTION</th>
                  <th>RATE</th>
                  <th>AMOUNT</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>BASIC AMOUNT</td>
                  <td>-</td>
                  <td>₹ 25,49,500 <i class="fas fa-edit"></i></td>
                </tr>
                <tr>
                  <td>STAMP DUTY</td>
                  <td>1%</td>
                  <td>₹ 25,495</td>
                </tr>
                <tr>
                  <td>OTHER TAX</td>
                  <td>0.8%</td>
                  <td>₹ 20,396</td>
                </tr>
                <tr>
                  <td>CGST</td>
                  <td>9%</td>
                  <td>₹ 2,29,455</td>
                </tr>
                <tr>
                  <td>SGST</td>
                  <td>9%</td>
                  <td>₹ 2,29,455</td>
                </tr>
                <tr class="highlight">
                  <td>TOTAL</td>
                  <td>-</td>
                  <td>₹ 30,54,301</td>
                </tr>
                <tr>
                  <td>DISCOUNT</td>
                  <td>5%</td>
                  <td>₹ 1,52,715</td>
                </tr>
                <tr class="highlight">
                  <td>GRAND TOTAL</td>
                  <td>-</td>
                  <td>₹ 29,01,585</td>
                </tr>
              </tbody>
            </table>
            <div class="payment-history">
              <p>PAYMENT HISTORY</p>
              <table>
                <thead>
                  <tr>
                    <th>STATUS</th>
                    <th>DATE</th>
                    <th>AMOUNT</th>
                    <th>ACTIONS</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>PENDING AMOUNT</td>
                    <td>-</td>
                    <td>₹ 29,01,585</td>
                    <td>-</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <a
              href="print_payment.html"
              class="btn-print-all"
              id="printAllBtn"
              role="button"
            >
              <i class="fas fa-print"></i> PRINT ALL PAYMENTS
            </a>
          </div>
        </div>
        <div class="btn-footer" id="initialButtons">
          <a
            href="new_payment.html"
            class="btn-new"
            id="newPaymentBtn"
            role="button"
          >
            <i class="fas fa-plus"></i> NEW PAYMENT
          </a>
          <a href="#" class="btn-close" id="closeBillBtn" role="button">
            <i class="fas fa-times"></i> CLOSE BILL
          </a>
          <a href="#" class="btn-print" id="printBtnInitial" role="button">
            <i class="fas fa-print"></i> PRINT
          </a>
          <a
            href="return_payment.html"
            class="btn-return"
            id="returnPaymentBtn"
            role="button"
          >
            <i class="fas fa-undo-alt"></i> RETURN PAYMENT
          </a>
        </div>
        <div class="bill-closed-footer" id="closedButtons">
          <div class="label">BILL CLOSED</div>
          <div class="buttons">
            <a
              href="#"
              class="btn-print-closed"
              id="printBtnClosed"
              role="button"
              >PRINT</a
            >
            <a href="#" class="btn-reopen" id="reopenBillBtn" role="button"
              >REOPEN BILL</a
            >
          </div>
        </div>
      </div>
    </div>
    <div id="customModal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="modalTitle"></h5>
        </div>
        <div class="modal-body">
          <p id="modalMessage"></p>
        </div>
        <div class="modal-footer">
          <a href="#" class="modal-close-btn" role="button">OK</a>
        </div>
      </div>
    </div>
    <script>
      const initialButtons = document.getElementById("initialButtons");
      const closedButtons = document.getElementById("closedButtons");
      const newPaymentBtn = document.getElementById("newPaymentBtn");
      const closeBillBtn = document.getElementById("closeBillBtn");
      const printBtnInitial = document.getElementById("printBtnInitial");
      const returnPaymentBtn = document.getElementById("returnPaymentBtn");
      const reopenBillBtn = document.getElementById("reopenBillBtn");
      const printBtnClosed = document.getElementById("printBtnClosed");
      const printAllBtn = document.getElementById("printAllBtn");
      const customModal = document.getElementById("customModal");
      const modalTitle = document.getElementById("modalTitle");
      const modalMessage = document.getElementById("modalMessage");
      const modalCloseBtn = document.querySelector(".modal-close-btn");
      // Function to show the custom modal
      function showModal(title, message, onConfirm = null) {
        modalTitle.textContent = title;
        modalMessage.textContent = message;
        customModal.classList.add("show");
        if (onConfirm) {
          modalCloseBtn.onclick = () => {
            onConfirm();
            hideModal();
          };
        } else {
          modalCloseBtn.onclick = hideModal;
        }
      }
      // Function to hide the custom modal
      function hideModal() {
        customModal.classList.remove("show");
      }
      // Function to handle printing without a modal
      function handlePrint() {
        window.print();
      }

      closeBillBtn.addEventListener("click", () => {
        showModal(
          "Close Bill",
          "Are you sure you want to close this bill?",
          () => {
            initialButtons.style.display = "none";
            closedButtons.style.display = "block";
          }
        );
      });
      printBtnInitial.addEventListener("click", handlePrint);
      // returnPaymentBtn.addEventListener("click", () => {
      //   showModal(
      //     "Return Payment",
      //     'The "RETURN PAYMENT" functionality would be implemented here.'
      //   );
      // });
      reopenBillBtn.addEventListener("click", () => {
        showModal(
          "Reopen Bill",
          "The bill has been successfully reopened.",
          () => {
            initialButtons.style.display = "flex";
            closedButtons.style.display = "none";
          }
        );
      });
      printBtnClosed.addEventListener("click", handlePrint);
      modalCloseBtn.addEventListener("click", hideModal);
    </script>
  </body>
</html>



<%-include('footer.ejs')%>